<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Predict · BigMart</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body class="predict-body">

  <!-- NAV -->
  <nav class="nav">
    <a href="/" class="nav-logo">BigMart<span class="accent">.</span></a>
    <div class="nav-links">
      <a href="/">Home</a>
      <a href="/insights">Insights</a>
      <a href="/dashboard">Dashboard</a>
      <a href="/predict" class="nav-cta">Predictor</a>
    </div>
  </nav>

  <div class="predict-layout">
    <!-- LEFT PANEL -->
    <div class="predict-sidebar">
      <div class="sidebar-content">
        <h1 class="sidebar-title">Sales<br/><span class="accent">Predictor</span></h1>
        <p class="sidebar-sub">Fill in the item and outlet details to get an instant sales forecast from the XGBoost model.</p>

        <div class="sidebar-info">
          <div class="info-row">
            <span class="info-dot"></span>
            <span>Model: Tuned XGBoost Regressor</span>
          </div>
          <div class="info-row">
            <span class="info-dot"></span>
            <span>R² Score: 0.5887</span>
          </div>
          <div class="info-row">
            <span class="info-dot"></span>
            <span>MAE: 787.76</span>
          </div>
          <div class="info-row">
            <span class="info-dot"></span>
            <span>Trained on 8,523 records</span>
          </div>
        </div>

        <!-- Result Box -->
        <div class="result-box" id="resultBox">
          <div class="result-label">Predicted Sales</div>
          <div class="result-value" id="resultValue">—</div>
          <div class="result-unit">outlet sales (₹)</div>
          <div class="result-note" id="resultNote"></div>
        </div>
      </div>
    </div>

    <!-- RIGHT PANEL - FORM -->
    <div class="predict-form-panel">
      <div class="form-header">
        <h2>Enter Item Details</h2>
        <p>All fields are required for an accurate prediction.</p>
      </div>

      <div class="predict-form" id="predictForm">

        <!-- ITEM SECTION -->
        <div class="form-section-title">Item Characteristics</div>

        <div class="form-row">
          <div class="form-group">
            <label>Item Weight (kg)</label>
            <input type="number" id="Item_Weight" placeholder="4.56 – 21.35" step="0.01" min="4.555" max="21.35"/>
          </div>
          <div class="form-group">
            <label>Item MRP (₹)</label>
            <input type="number" id="Item_MRP" placeholder="31.29 – 266.89" step="0.01" min="31.29" max="266.89"/>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>Item Visibility</label>
            <input type="number" id="Item_Visibility" placeholder="0.000 – 0.328" step="0.001" min="0" max="0.3284"/>
          </div>
          <div class="form-group">
            <label>Item Fat Content</label>
            <select id="Item_Fat_Content">
              <option value="">Select...</option>
              <option value="Low Fat">Low Fat</option>
              <option value="Regular">Regular</option>
            </select>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group full-width">
            <label>Item Type</label>
            <select id="Item_Type">
              <option value="">Select category...</option>
              <option>Baking Goods</option>
              <option>Breads</option>
              <option>Breakfast</option>
              <option>Canned</option>
              <option>Dairy</option>
              <option>Frozen Foods</option>
              <option>Fruits and Vegetables</option>
              <option>Hard Drinks</option>
              <option>Health and Hygiene</option>
              <option>Household</option>
              <option>Meat</option>
              <option>Others</option>
              <option>Seafood</option>
              <option>Snack Foods</option>
              <option>Soft Drinks</option>
              <option>Starchy Foods</option>
            </select>
          </div>
        </div>

        <!-- OUTLET SECTION -->
        <div class="form-section-title" style="margin-top:32px">Outlet Characteristics</div>

        <div class="form-row">
          <div class="form-group">
            <label>Outlet Establishment Year</label>
            <select id="Outlet_Establishment_Year">
              <option value="">Select...</option>
              <option value="1985">1985</option>
              <option value="1987">1987</option>
              <option value="1997">1997</option>
              <option value="1998">1998</option>
              <option value="1999">1999</option>
              <option value="2002">2002</option>
              <option value="2004">2004</option>
              <option value="2007">2007</option>
              <option value="2009">2009</option>
            </select>
          </div>
          <div class="form-group">
            <label>Outlet Size</label>
            <select id="Outlet_Size">
              <option value="">Select...</option>
              <option value="Small">Small</option>
              <option value="Medium">Medium</option>
              <option value="High">High</option>
            </select>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>Outlet Location Type</label>
            <select id="Outlet_Location_Type">
              <option value="">Select...</option>
              <option value="Tier 1">Tier 1</option>
              <option value="Tier 2">Tier 2</option>
              <option value="Tier 3">Tier 3</option>
            </select>
          </div>
          <div class="form-group">
            <label>Outlet Type</label>
            <select id="Outlet_Type">
              <option value="">Select...</option>
              <option value="Grocery Store">Grocery Store</option>
              <option value="Supermarket Type1">Supermarket Type1</option>
              <option value="Supermarket Type2">Supermarket Type2</option>
              <option value="Supermarket Type3">Supermarket Type3</option>
            </select>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group full-width">
            <label>Outlet Identifier</label>
            <select id="Outlet_Identifier">
              <option value="">Select...</option>
              <option value="OUT010">OUT010</option>
              <option value="OUT013">OUT013</option>
              <option value="OUT017">OUT017</option>
              <option value="OUT018">OUT018</option>
              <option value="OUT019">OUT019</option>
              <option value="OUT027">OUT027</option>
              <option value="OUT035">OUT035</option>
              <option value="OUT045">OUT045</option>
              <option value="OUT046">OUT046</option>
              <option value="OUT049">OUT049</option>
            </select>
          </div>
        </div>

        <div class="insight-note">
          <span class="insight-note-icon">↑</span>
          Sales predictions are most sensitive to <strong>Outlet Type</strong> and <strong>Item MRP</strong>. Product-level features like Item Type and Visibility have smaller influence — this reflects what the model learned from the data, not a limitation of the tool.
        </div>

        <button class="predict-btn" id="predictBtn" onclick="submitPrediction()">
          <span id="btnText">Generate Prediction</span>
          <span id="btnLoader" class="btn-loader hidden">Predicting...</span>
        </button>

        <div class="error-msg hidden" id="errorMsg"></div>
      </div>
    </div>
  </div>

  <script src="{{ url_for('static', filename='js/predict.js') }}"></script>
</body>
</html>